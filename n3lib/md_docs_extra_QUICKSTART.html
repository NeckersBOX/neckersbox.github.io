<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>N3 Library: QuickStart</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="n3l_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">N3 Library
   </div>
   <div id="projectbrief">A C library for building neural network.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_extra_QUICKSTART.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QuickStart </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Get and Build the library</h2>
<div class="fragment"><div class="line">$ git clone https://github.com/neckersbox/n3lib.git</div><div class="line">$ cd n3lib</div><div class="line">$ make</div><div class="line"># make install</div></div><!-- fragment --><h2>Use the library</h2>
<p>To use N3 Library in your project you need to follow the steps below:</p>
<ol type="1">
<li>Include the <code>n3l/n3lib.h</code> header in your source.</li>
<li>Build the network by <code><a class="el" href="structN3LArgs.html" title="Network arguments. ">N3LArgs</a></code> and <code><a class="el" href="n3__network_8c.html#a5f87e1efebd658dd55d7d2ca1768bdba" title="Build a new network. ">n3l_network_build()</a></code></li>
<li>Forward your inputs through the network by <code><a class="el" href="n3__forward_8c.html#abc37ac7f137db4d053e3b19ac8e6542a" title="Execute forward propagation on the whole network. ">n3l_forward_propagation()</a></code></li>
<li>Improve network results providing targets and <code><a class="el" href="n3__backward_8c.html#a871c936d33bfb280aa548e2dfd5ff32c" title="Execute backward propagation on the whole network. ">n3l_backward_propagation()</a></code></li>
<li>Free the memory used by the network with <code><a class="el" href="n3__network_8c.html#a327ffd586b67f586743d72a146c4ea95" title="Free the network&#39;s allocated memory. ">n3l_network_free()</a></code></li>
<li>Compile your project with the flag <code>-ln3l</code></li>
</ol>
<p>A small example implementing the XOR operation: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;n3l/n3lib.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">  <a class="code" href="structN3LArgs.html">N3LArgs</a> args;</div><div class="line">  <a class="code" href="structN3LNetwork.html">N3LNetwork</a> *net;</div><div class="line">  <span class="keywordtype">double</span> inputs[4][2]  = { { 0, 0 }, { 0, 1 }, { 1, 1 }, { 1, 0 } };</div><div class="line">  <span class="keywordtype">double</span> targets[4][2] = { { 0 }, { 1 }, { 0 }, { 1 } };</div><div class="line">  <span class="keywordtype">double</span> *outputs;</div><div class="line">  uint64_t j;</div><div class="line"></div><div class="line">  args = <a class="code" href="n3__misc_8c.html#a22f4dc2ca9ee867a30c91565e37788d9">n3l_misc_init_arg</a>();</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#afbd19ab7f7afe11e440f46d293a0f6dc">in_size</a> = 2;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> = 1;</div><div class="line">  args.<a class="code" href="structN3LArgs.html#ae875ef755586a29387def48249c98d81">h_size</a> = (uint64_t *) malloc(args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> * <span class="keyword">sizeof</span>(uint64_t));</div><div class="line">  args.<a class="code" href="structN3LArgs.html#ae875ef755586a29387def48249c98d81">h_size</a>[0] = 2;</div><div class="line">  args.<a class="code" href="structN3LArgs.html#a968aa1ed194fc7bbfaac154bcbf8a405">act_h</a> = (<a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056">N3LActType</a> *) malloc(args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> * <span class="keyword">sizeof</span>(<a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056">N3LActType</a>));</div><div class="line">  args.<a class="code" href="structN3LArgs.html#a968aa1ed194fc7bbfaac154bcbf8a405">act_h</a>[0] = <a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056a58c090ee14de5def02bd6aaa27af7888">N3LSigmoid</a>;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#a63bb20896b0af109ea281998e5fd56ab">out_size</a> = 1;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#ad51d108eba4b55f7fc49174724fbacad">bias</a> = 0.5;</div><div class="line"></div><div class="line">  net = <a class="code" href="n3__network_8c.html#a5f87e1efebd658dd55d7d2ca1768bdba">n3l_network_build</a>(args, 0.5);</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> ( j = 0; j &lt; 10000; ++j ) {</div><div class="line">    net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a> = inputs[j % 4];</div><div class="line">    outputs = <a class="code" href="n3__forward_8c.html#abc37ac7f137db4d053e3b19ac8e6542a">n3l_forward_propagation</a>(net);</div><div class="line">    printf(<span class="stringliteral">&quot;Iter %ld/%d - Target: %.0lf - Output: %lf - Error: %lf\n&quot;</span>,</div><div class="line">      j + 1, 10000, targets[j % 4][0], outputs[0], targets[j % 4][0] - outputs[0]);</div><div class="line">    free(outputs);</div><div class="line"></div><div class="line">    net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a> = targets[j % 4];</div><div class="line">    <a class="code" href="n3__backward_8c.html#a871c936d33bfb280aa548e2dfd5ff32c">n3l_backward_propagation</a>(net);</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="n3__network_8c.html#a327ffd586b67f586743d72a146c4ea95">n3l_network_free</a>(net);</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>Saved as <code>xor.c</code> can be compiled by <code>gcc xor.c -o xor -ln3l</code>, the results will be like this:</p>
<div class="fragment"><div class="line">Iter 1/10000 - Target: 0 - Output: 0.678551 - Error: -0.678551</div><div class="line">Iter 2/10000 - Target: 1 - Output: 0.703232 - Error: 0.296768</div><div class="line">Iter 3/10000 - Target: 0 - Output: 0.730443 - Error: -0.730443</div><div class="line">Iter 4/10000 - Target: 1 - Output: 0.676008 - Error: 0.323992</div><div class="line">...</div><div class="line">Iter 9997/10000 - Target: 0 - Output: 0.091856 - Error: -0.091856</div><div class="line">Iter 9998/10000 - Target: 1 - Output: 0.930525 - Error: 0.069475</div><div class="line">Iter 9999/10000 - Target: 0 - Output: 0.080475 - Error: -0.080475</div><div class="line">Iter 10000/10000 - Target: 1 - Output: 0.930533 - Error: 0.069467</div></div><!-- fragment --><h2>Save and load results</h2>
<p>You can also save the results and load them in another project using <code><a class="el" href="n3__file_8c.html#aea5e504fe0f565507b01729737f16341" title="Export the current network state to the chosen file. ">n3l_file_export_network()</a></code> and <code><a class="el" href="n3__file_8c.html#a4fef76548ed87845dceafaa9527a83d0" title="Import the network state from a previously saved file. ">n3l_file_import_network()</a></code>. Using the same example used in the previous section, before calling <code>n3l_network_free(net)</code> we can add the following line:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> ( <a class="code" href="n3__file_8c.html#aea5e504fe0f565507b01729737f16341">n3l_file_export_network</a>(net, <span class="stringliteral">&quot;xor.n3l&quot;</span>) == <span class="keyword">true</span> ) {</div><div class="line">  printf(<span class="stringliteral">&quot;Network state saved to xor.n3l.\n&quot;</span>);</div><div class="line">}</div><div class="line"><span class="keywordflow">else</span> {</div><div class="line">  fprintf(stderr, <span class="stringliteral">&quot;Error while exporting state to xor.n3l\n&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="n3__network_8c.html#a327ffd586b67f586743d72a146c4ea95">n3l_network_free</a>(net);</div></div><!-- fragment --><p>Now, if you want to load a previous network state without do again the learning process, you can load the file <code>xor.n3l</code>. Example of another project which perform xor operation using the previous state saved:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;n3l/n3lib.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">  <a class="code" href="structN3LNetwork.html">N3LNetwork</a> *net;</div><div class="line">  <span class="keywordtype">double</span> inputs[2][2] = { { 1, 0 }, { 1, 1 } };</div><div class="line">  <span class="keywordtype">double</span> *outputs;</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> ( !(net = <a class="code" href="n3__file_8c.html#a4fef76548ed87845dceafaa9527a83d0">n3l_file_import_network</a>(<span class="stringliteral">&quot;xor.n3l&quot;</span>)) ) {</div><div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Error while loading xor.n3l\n&quot;</span>);</div><div class="line">    exit(1);</div><div class="line">  }</div><div class="line"></div><div class="line">  net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a> = inputs[0];</div><div class="line">  outputs = <a class="code" href="n3__forward_8c.html#abc37ac7f137db4d053e3b19ac8e6542a">n3l_forward_propagation</a>(net);</div><div class="line">  printf(<span class="stringliteral">&quot;Case { 1, 0 } - Output: %lf\n&quot;</span>, outputs[0]);</div><div class="line">  free(outputs);</div><div class="line"></div><div class="line">  net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a> = inputs[1];</div><div class="line">  outputs = <a class="code" href="n3__forward_8c.html#abc37ac7f137db4d053e3b19ac8e6542a">n3l_forward_propagation</a>(net);</div><div class="line">  printf(<span class="stringliteral">&quot;Case { 1, 1 } - Output: %lf\n&quot;</span>, outputs[0]);</div><div class="line">  free(outputs);</div><div class="line"></div><div class="line">  <a class="code" href="n3__network_8c.html#a327ffd586b67f586743d72a146c4ea95">n3l_network_free</a>(net);</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>And the results will be like these ones:</p>
<div class="fragment"><div class="line">Case { 1, 0 } - Output: 0.931341</div><div class="line">Case { 1, 1 } - Output: 0.079728</div></div><!-- fragment --><h2>Get inputs and targets from CSV</h2>
<p>You can get inputs and targets data from a CSV file through the function <code>n3l_file_get_csv_data</code>. Example using a file named <code>test.csv</code> with the following content:</p>
<div class="fragment"><div class="line">Input 0, Input 1, Target 0</div><div class="line">0.0,0.0,0.0</div><div class="line">0.0,1.0,1.0</div><div class="line">1.0,1.0,0.0</div><div class="line">1.0,0.0,1.0</div></div><!-- fragment --><p>In this example the data are already in a <em>printf-like double style</em>. If you have inputs with space or others format the function accepts a custom parser function which receive the raw string and return a double ( See <code>N3LCSVData</code> type )</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;n3l/n3lib.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">  <a class="code" href="structN3LArgs.html">N3LArgs</a> args;</div><div class="line">  <a class="code" href="structN3LNetwork.html">N3LNetwork</a> *net;</div><div class="line">  <span class="keywordtype">double</span> *outputs, *data;</div><div class="line">  uint64_t j;</div><div class="line">  FILE *csv;</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> ( !(csv = fopen(<span class="stringliteral">&quot;test.csv&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) ) {</div><div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Cannot open test.csv.\n&quot;</span>);</div><div class="line">    exit(1);</div><div class="line">  }</div><div class="line"></div><div class="line">  args = <a class="code" href="n3__misc_8c.html#a22f4dc2ca9ee867a30c91565e37788d9">n3l_misc_init_arg</a>();</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#afbd19ab7f7afe11e440f46d293a0f6dc">in_size</a> = 2;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> = 1;</div><div class="line">  args.<a class="code" href="structN3LArgs.html#ae875ef755586a29387def48249c98d81">h_size</a> = (uint64_t *) malloc(args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> * <span class="keyword">sizeof</span>(uint64_t));</div><div class="line">  args.<a class="code" href="structN3LArgs.html#ae875ef755586a29387def48249c98d81">h_size</a>[0] = 2;</div><div class="line">  args.<a class="code" href="structN3LArgs.html#a968aa1ed194fc7bbfaac154bcbf8a405">act_h</a> = (<a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056">N3LActType</a> *) malloc(args.<a class="code" href="structN3LArgs.html#acbb947695cd6db88658a2a6fa78c1682">h_layers</a> * <span class="keyword">sizeof</span>(<a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056">N3LActType</a>));</div><div class="line">  args.<a class="code" href="structN3LArgs.html#a968aa1ed194fc7bbfaac154bcbf8a405">act_h</a>[0] = <a class="code" href="n3__header_8h.html#a3118e8995213ca26bd388c3d94cd8056a58c090ee14de5def02bd6aaa27af7888">N3LSigmoid</a>;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#a63bb20896b0af109ea281998e5fd56ab">out_size</a> = 1;</div><div class="line"></div><div class="line">  args.<a class="code" href="structN3LArgs.html#ad51d108eba4b55f7fc49174724fbacad">bias</a> = 0.5;</div><div class="line"></div><div class="line">  net = <a class="code" href="n3__network_8c.html#a5f87e1efebd658dd55d7d2ca1768bdba">n3l_network_build</a>(args, 0.5);</div><div class="line"></div><div class="line">  net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a> = (<span class="keywordtype">double</span> *) malloc(2 * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div><div class="line">  net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a> = (<span class="keywordtype">double</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div><div class="line">  <span class="keywordflow">for</span> ( j = 0; j &lt; 10000; ++j ) {</div><div class="line">    data = <a class="code" href="n3__file_8c.html#a1c7afb5f65ab3f48f80b25b04cb6949d">n3l_file_get_csv_data</a>(csv, (j % 4) ? 0 : 1, 0, 3, NULL);</div><div class="line"></div><div class="line">    net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a>[0] = data[0];</div><div class="line">    net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a>[1] = data[1];</div><div class="line">    outputs = <a class="code" href="n3__forward_8c.html#abc37ac7f137db4d053e3b19ac8e6542a">n3l_forward_propagation</a>(net);</div><div class="line"></div><div class="line">    net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a>[0] = data[2];</div><div class="line"></div><div class="line">    free(data);</div><div class="line">    printf(<span class="stringliteral">&quot;Iter %ld/%d - Target: %.0lf - Output: %lf - Error: %lf\n&quot;</span>,</div><div class="line">      j + 1, 10000, net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a>[0], outputs[0], net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a>[0] - outputs[0]);</div><div class="line">    free(outputs);</div><div class="line"></div><div class="line">    <a class="code" href="n3__backward_8c.html#a871c936d33bfb280aa548e2dfd5ff32c">n3l_backward_propagation</a>(net);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( !((j + 1) % 4) ) {</div><div class="line">      printf(<span class="stringliteral">&quot;End example. Restart.\n&quot;</span>);</div><div class="line">      rewind(csv);</div><div class="line">    }</div><div class="line">  }</div><div class="line">  free(net-&gt;<a class="code" href="structN3LNetwork.html#a45ff5bcae18502559925aba0cbd0313b">inputs</a>);</div><div class="line">  free(net-&gt;<a class="code" href="structN3LNetwork.html#aba0f6767a66173743840b7c9fa919daf">targets</a>);</div><div class="line">  fclose(csv);</div><div class="line"></div><div class="line">  <a class="code" href="n3__network_8c.html#a327ffd586b67f586743d72a146c4ea95">n3l_network_free</a>(net);</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
